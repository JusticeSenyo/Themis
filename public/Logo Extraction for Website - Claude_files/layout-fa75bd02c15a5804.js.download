(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2004],{91192:function(e,t,n){Promise.resolve().then(n.bind(n,54710))},54710:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(27573),r=n(71817);function a(e){let{children:t}=e;return(0,i.jsx)(r.hH,{children:t})}},25449:function(e){e.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},79884:function(e,t,n){var i=n(15428),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},15428:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},52221:function(e,t,n){var i=n(25449),r=n(97172);e.exports=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=r(n))==n?n:0),void 0!==t&&(t=(t=r(t))==t?t:0),i(r(e),t,n)}},87590:function(e,t,n){var i=n(62579);e.exports=function(e,t){return i(e,t)}},97172:function(e,t,n){var i=n(79884),r=n(88873),a=n(58510),o=0/0,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?o:+e}},88146:function(e,t,n){"use strict";n.d(t,{default:function(){return r.a}});var i=n(16340),r=n.n(i)},79939:function(e){!function(){"use strict";var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,i="",r=0,a=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else if(47===n)break;else n=47;if(47===n){if(a===s-1||1===o);else if(a!==s-1&&2===o){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",r=0):r=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),a=s,o=0;continue}}else if(2===i.length||1===i.length){i="",r=0,a=s,o=0;continue}}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+e.slice(a+1,s):i=e.slice(a+1,s),r=s-a-1;a=s,o=0}else 46===n&&-1!==o?++o:o=-1}return i}var i={resolve:function(){for(var e,i,r="",a=!1,o=arguments.length-1;o>=-1&&!a;o--)o>=0?i=arguments[o]:(void 0===e&&(e=""),i=e),t(i),0!==i.length&&(r=i+"/"+r,a=47===i.charCodeAt(0));return(r=n(r,!a),a)?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return(0!==(e=n(e,!i)).length||i||(e="."),e.length>0&&r&&(e+="/"),i)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];t(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":i.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n||(e=i.resolve(e))===(n=i.resolve(n)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var a=e.length,o=a-r,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var l=n.length-s,u=o<l?o:l,c=-1,d=0;d<=u;++d){if(d===u){if(l>u){if(47===n.charCodeAt(s+d))return n.slice(s+d+1);if(0===d)return n.slice(s+d)}else o>u&&(47===e.charCodeAt(r+d)?c=d:0===d&&(c=0));break}var v=e.charCodeAt(r+d);if(v!==n.charCodeAt(s+d))break;47===v&&(c=d)}var _="";for(d=r+c+1;d<=a;++d)(d===a||47===e.charCodeAt(d))&&(0===_.length?_+="..":_+="/..");return _.length>0?_+n.slice(s+c):(s+=c,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),i=47===n,r=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(n=e.charCodeAt(o))){if(!a){r=o;break}}else a=!1;return -1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw TypeError('"ext" argument must be a string');t(e);var i,r=0,a=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,l=-1;for(i=e.length-1;i>=0;--i){var u=e.charCodeAt(i);if(47===u){if(!o){r=i+1;break}}else -1===l&&(o=!1,l=i+1),s>=0&&(u===n.charCodeAt(s)?-1==--s&&(a=i):(s=-1,a=l))}return r===a?a=l:-1===a&&(a=e.length),e.slice(r,a)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){r=i+1;break}}else -1===a&&(o=!1,a=i+1);return -1===a?"":e.slice(r,a)},extname:function(e){t(e);for(var n=-1,i=0,r=-1,a=!0,o=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47===l){if(!a){i=s+1;break}continue}-1===r&&(a=!1,r=s+1),46===l?-1===n?n=s:1!==o&&(o=1):-1!==n&&(o=-1)}return -1===n||-1===r||0===o||1===o&&n===r-1&&n===i+1?"":e.slice(n,r)},format:function(e){var t,n;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n},parse:function(e){t(e);var n,i={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return i;var r=e.charCodeAt(0),a=47===r;a?(i.root="/",n=1):n=0;for(var o=-1,s=0,l=-1,u=!0,c=e.length-1,d=0;c>=n;--c){if(47===(r=e.charCodeAt(c))){if(!u){s=c+1;break}continue}-1===l&&(u=!1,l=c+1),46===r?-1===o?o=c:1!==d&&(d=1):-1!==o&&(d=-1)}return -1===o||-1===l||0===d||1===d&&o===l-1&&o===s+1?-1!==l&&(0===s&&a?i.base=i.name=e.slice(1,l):i.base=i.name=e.slice(s,l)):(0===s&&a?(i.name=e.slice(1,o),i.base=e.slice(1,l)):(i.name=e.slice(s,o),i.base=e.slice(s,l)),i.ext=e.slice(o,l)),s>0?i.dir=e.slice(0,s-1):a&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},o=!0;try{t[e](a,a.exports,i),o=!1}finally{o&&delete n[e]}return a.exports}i.ab="//";var r=i(114);e.exports=r}()},28803:function(e,t,n){"use strict";n.d(t,{V0:function(){return k},bf:function(){return w},OD:function(){return N},m:function(){return x},$Y:function(){return I},$H:function(){return O},j1:function(){return P},f7:function(){return z},Pe:function(){return E},j7:function(){return L},Rq:function(){return b},Cy:function(){return R},cE:function(){return y},CJ:function(){return A},_C:function(){return S},QR:function(){return C},y6:function(){return M},cc:function(){return T},gm:function(){return U},Ke:function(){return Q},T$:function(){return V},fc:function(){return H},W:function(){return K},PD:function(){return D},Gk:function(){return $},gK:function(){return B},Ls:function(){return q},jl:function(){return F}});var i=n(3053),r=n(5362),a=n(27218),o=n(1812),s=n(98731),l=n(13262),u=n(7653);function c(e){let t=JSON.stringify(e);return(0,u.useMemo)(()=>e,[t])}var d=n(51432),v=n(45144),_=n(77930),g=n(50803),f=n(87590),p=n.n(f),m=n(81695),h=n(1146);let b=e=>{let t=(0,_.useQueryClient)(),{activeOrganization:n}=(0,a.t)(),i=null==n?void 0:n.uuid,[r,o]=(0,u.useReducer)(e=>e+1,0),s=c([l.I8,{orgUUID:i},{uuid:e}]),d=(0,u.useMemo)(()=>t.getQueryData(s),[t,s,e,r]);return(0,u.useEffect)(()=>t.getQueryCache().subscribe(e=>{"updated"===e.type&&"success"===e.action.type&&(0,g._x)({queryKey:s},e.query)&&o()}),[t,o,s]),{data:d}},y=e=>{let t=(0,_.useQueryClient)(),{activeOrganization:n}=(0,a.t)(),i=null==n?void 0:n.uuid,r=c([l.I8,{orgUUID:i},{uuid:e}]);return t.getQueryData(r)},k=30,w=1e4,C=e=>{let{limit:t,offset:n,enabled:i=!0,starred:o}=e,{activeOrganization:s}=(0,a.t)(),u=null==s?void 0:s.uuid,c=new URLSearchParams;void 0!==t&&c.append("limit",t.toString()),void 0!==n&&c.append("offset",n.toString()),void 0!==o&&c.append("starred",o.toString());let d=c.toString();return d=d?"?".concat(d):"",(0,r.WE)("/api/organizations/".concat(null!=u?u:"","/chat_conversations").concat(d),{queryKey:[l.tv,{orgUUID:u},{limit:t,offset:n,starred:o}],staleTime:3e5,enabled:!!u&&i})},x=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,r.WE)("/api/organizations/".concat(t,"/chat_conversations/count_all"),{queryKey:[l.Dn,{orgUUID:t}],staleTime:3e5,enabled:!!t})},E=()=>{let{activeOrganization:e}=(0,a.t)(),t=(0,r.OJ)();return(0,u.useCallback)(async n=>{let{limit:i,offset:r}=n,a=new URLSearchParams;void 0!==i&&a.append("limit",i.toString()),void 0!==r&&a.append("offset",r.toString());let o=a.toString();return o=o?"?".concat(o):"",(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/chat_conversations").concat(o))).json()},[null==e?void 0:e.uuid,t])},S=function(e){let{suppressError:t,enabled:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0},{activeOrganization:i}=(0,a.t)(),o=null==i?void 0:i.uuid,s=(0,u.useRef)([]),c=(0,_.useQueryClient)(),d="/api/organizations/".concat(null!=o?o:"","/chat_conversations/").concat(e,"?tree=True&rendering_mode=messages&render_all_tools=true"),v=(0,r.WE)(d,{queryKey:[l.I8,{orgUUID:o},{uuid:e}],staleTime:3e5,enabled:!!o&&!!e&&n,meta:{noToast:t}},t=>(c.invalidateQueries({queryKey:[l.Gj,{orgUUID:o,conversationUUID:e}]}),(0,h.fX)(t))),g=(0,u.useMemo)(()=>{if(!v.data)return s.current=[],s.current;let e=(0,h.kX)(v.data);if(e.length!==s.current.length||e.some((e,t)=>{var n;return e.uuid!==(null===(n=s.current[t])||void 0===n?void 0:n.uuid)}))return s.current=e,s.current;for(let t=0;t<e.length;t++)p()(e[t],s.current[t])||(s.current[t]=e[t]);return s.current},[v.data]);return{...v,currentPath:g}},T=e=>{let t=(0,_.useQueryClient)(),{activeOrganization:n}=(0,a.t)(),i=null==n?void 0:n.uuid;return(0,u.useCallback)(()=>{t.invalidateQueries({queryKey:[l.I8,{orgUUID:i},{uuid:e}]})},[t,i,e])},O=(e,t)=>{let{mutateAsync:n}=I(),i=(0,m.useRouter)(),r=t||(0,d.H)();return(0,u.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{model:void 0,controlsOpen:!1},a={uuid:r,name:"",model:t.model};t.createMode&&(a.create_mode=t.createMode),t.projectUuid&&(a.project_uuid=t.projectUuid),n(a).then(()=>{let n="/chat/".concat(r).concat(t.controlsOpen?"?controls=1":"");i[e](n)}).catch(e=>{(0,v.Tb)(e)})},[n,i,e,r])},I=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid,n=(0,_.useQueryClient)(),i=e=>[l.I8,{orgUUID:t},{uuid:e}];return(0,r.uC)("/api/organizations/".concat(null!=t?t:"","/chat_conversations"),"POST",{enabled:!!t,onSuccess:e=>{n.setQueryData(i(e.uuid),t=>({...t||{},...e,chat_messages:(null==t?void 0:t.chat_messages)||[],messageByUuid:new Map,parentByChildUuid:new Map,childrenByParentUuid:new Map,selectedChildByUuid:new Map}))}})},P=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid,n=(0,_.useQueryClient)();return(0,r.Ne)(e=>{let{uuid:n}=e;return"/api/organizations/".concat(null!=t?t:"","/chat_conversations/").concat(n)},"DELETE",(e,t)=>{let{uuid:n}=e;if(!t)return[];let i=t.findIndex(e=>e.uuid===n);if(!(i>-1))return t;{let e=[...t];return e.splice(i,1),e}},{enabled:!!t,queryKey:[l.tv,{orgUUID:t}],onSuccess:async(e,i)=>{let{uuid:r,projectUuid:a}=i;await n.invalidateQueries({queryKey:[l.I8,{orgUUID:t},{uuid:r}]}),a&&await n.invalidateQueries({queryKey:[l.lx,{orgUuid:t,projectUuid:a}]}),await W(n,t)}})},z=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid,i=(0,_.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(n,"/chat_conversations/delete_many"),"POST",{onSuccess:async t=>{await W(i,n),e&&e(t)}})},U=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,r.WE)("/api/organizations/".concat(t,"/shares"),{queryKey:[l.PB,{orgUUID:t}],enabled:!!t,staleTime:3e5})},R=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid;return(0,r.WE)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/latest"),{enabled:!!n&&!!e,queryKey:[l.Gj,{orgUUID:n,conversationUUID:e}],staleTime:0,meta:{noToast:!0}},e=>{let{snapshot:t,shareable:n,disabled_reason:i}=e;return{shareable:n,disabled_reason:i,snapshot:t?{...t,chat_messages:t.chat_messages.map(e=>(0,h.Dk)(e))}:null}})},A=e=>{let{activeOrganization:t,account:n}=(0,a.t)(),i=null==t?void 0:t.uuid,o=n&&i?"/api/organizations/".concat(i,"/chat_snapshots/").concat(e,"?rendering_mode=messages&render_all_tools=true"):"/api/chat_snapshots/".concat(e,"?rendering_mode=messages&render_all_tools=true");return(0,r.WE)(o,{retry:!1,refetchInterval:!1,enabled:!!e,staleTime:0,queryKey:[l.ld,{orgUUID:i,snapshotUUID:e}]},e=>({...e,chat_messages:e.chat_messages.map(e=>(0,h.Dk)(e))}))},D=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid,i=(0,_.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/share"),"POST",{onSuccess:()=>{i.invalidateQueries({queryKey:[l.Gj,{orgUUID:n,conversationUUID:e}]}),i.invalidateQueries({queryKey:[l.PB,{orgUUID:n}]}),i.invalidateQueries({queryKey:[l.VH,{orgUUID:n}]})}})},q=(e,t)=>{let{activeOrganization:n}=(0,a.t)(),i=null==n?void 0:n.uuid,o=(0,_.useQueryClient)();return(0,r.uC)("/api/organizations/".concat(i,"/share/").concat(t),"DELETE",{enabled:!!i&&!!t,meta:{errorMessage:"There was an error while trying to unshare the conversation. Please try again."},onSuccess:()=>{o.invalidateQueries({queryKey:[l.Gj,{orgUUID:i,conversationUUID:e}]}),o.invalidateQueries({queryKey:[l.PB,{orgUUID:i}]}),o.invalidateQueries({queryKey:[l.VH,{orgUUID:i}]})}})},M=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid;return(0,r.WE)("/api/organizations/".concat(n,"/artifact-versions/").concat(e),{retry:!1,refetchInterval:!1,enabled:!!e&&!!n,staleTime:0,queryKey:[l.qB,{artifactVersionUUID:e}]})},Q=function(e,t,n){var s,u,c;let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{track:v}=(0,i.z$)(),g=null!==(u=null===(s=(0,o.T)())||void 0===s?void 0:s.preview_feature_uses_artifacts)&&void 0!==u&&u,{activeOrganization:f}=(0,a.t)(),p=null==f?void 0:f.uuid,m=(0,_.useQueryClient)(),h=[l.I8,{orgUUID:p},{uuid:e}];return(0,r.uC)("/api/organizations/".concat(null!=p?p:"","/chat_conversations/").concat(e,"/chat_messages/").concat(null!==(c=t.uuid)&&void 0!==c?c:"","/chat_feedback"),t.chat_feedback?"PUT":"POST",{enabled:!!p,meta:{errorMessage:"We could not save your feedback. Please try again later."},...d,onSuccess(){for(var i,r,a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];v({event_key:"claudeai.conversation.feedback.sent",message_uuid:t.uuid,conversation_uuid:e,artifacts_enabled:g,conversationHasArtifacts:n,type:null===(i=t.chat_feedback)||void 0===i?void 0:i.type}),m.invalidateQueries({queryKey:h}),null===(r=d.onSuccess)||void 0===r||r.call(d,...o)}})},j=()=>{let e=(0,_.useQueryClient)(),{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid;return(0,u.useCallback)((t,i)=>{t&&(e.setQueryData([l.I8,{orgUUID:n},{uuid:t}],e=>e&&{...e,...i}),e.setQueriesData({queryKey:[l.tv,{orgUUID:n}]},e=>null==e?void 0:e.map(e=>e.uuid!==t?e:{...e,...i})))},[n,e])},K=e=>{let t=(0,_.useQueryClient)(),{activeOrganization:n}=(0,a.t)(),i=null==n?void 0:n.uuid,o=j();return(0,r.uC)("/api/organizations/".concat(i,"/chat_conversations/").concat(e),"PUT",{onMutate:n=>{var r;let{name:a}=n,s=t.getQueryData([l.I8,{orgUUID:i},{uuid:e}]);return o(e,{name:a}),{oldTitle:null!==(r=null==s?void 0:s.name)&&void 0!==r?r:""}},onError(t,n,i){i&&o(e,{name:i.oldTitle})}})},L=e=>{let t=j(),{activeOrganization:n}=(0,a.t)();return(0,r.uC)("/api/organizations/".concat(null==n?void 0:n.uuid,"/chat_conversations/").concat(e,"/title"),"POST",{onSuccess(n){let{title:i}=n;t(e,{name:null!=i?i:""})},meta:{noToast:!0}})};function N(e){var t,n;let i=(0,s.K)(e);return i+" "+e.attachments.map(e=>e.extracted_content).join(" ")+" "+((null===(t=e.content)||void 0===t?void 0:t.filter(e=>"tool_use"===e.type).map(e=>e.input?JSON.stringify(e.input):e.partial_json||"").join(" "))||"")+" "+((null===(n=e.content)||void 0===n?void 0:n.filter(e=>"tool_result"===e.type).flatMap(e=>e.content.filter(e=>"text"===e.type).map(e=>e.text)).join(" "))||"")}let B=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid;return(0,r.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/stop_response"),"POST")},H=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,r.uC)(e=>{let{conversation_uuid:n}=e;return"/api/organizations/".concat(t,"/chat_conversations/").concat(n,"/tool_result")},"POST",{enabled:!!t,meta:{errorMessage:"We could not record the tool result. Please try again later."},transformVariables:e=>{let{conversation_uuid:t,...n}=e;return n}})},F=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid;return(0,r.uC)("/api/organizations/".concat(n,"/chat_conversations/").concat(e,"/current_leaf_message_uuid"),"PUT")},V=(e,t)=>{let{activeOrganization:n}=(0,a.t)(),i=(0,_.useQueryClient)(),o=null==n?void 0:n.uuid;return(0,r.Ne)("/api/organizations/".concat(o,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,settings:{...t.settings,...e.settings}}:void 0,{enabled:!!e,onSuccess:()=>{W(i,o)},onSettled:()=>{(null==t?void 0:t.refetchOnSettled)&&i.refetchQueries({queryKey:[l.I8,{orgUUID:o},{uuid:e}]})},queryKey:[l.I8,{orgUUID:o},{uuid:e}]})},W=async(e,t)=>{await Promise.all([e.invalidateQueries({queryKey:[l.tv,{orgUUID:t}]}),e.invalidateQueries({queryKey:[l.Dn,{orgUUID:t}]})])},$=e=>{let{activeOrganization:t}=(0,a.t)(),n=(0,_.useQueryClient)(),i=null==t?void 0:t.uuid;return(0,r.Ne)("/api/organizations/".concat(i,"/chat_conversations/").concat(e,"?rendering_mode=raw"),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{W(n,i)},queryKey:[l.I8,{orgUUID:i},{uuid:e}]})}},1146:function(e,t,n){"use strict";n.d(t,{Dk:function(){return v},Ef:function(){return u},FC:function(){return o},Gg:function(){return c},HX:function(){return f},QC:function(){return l},fX:function(){return g},kX:function(){return m},mj:function(){return h},vv:function(){return p},w$:function(){return d},wZ:function(){return s}});var i=n(45144),r=n(52221),a=n.n(r);let o="new-assistant-message-uuid",s="new-human-message-uuid",l="00000000-0000-4000-8000-000000000000",u=e=>e!==o;function c(e,t){let n=e.get(t);if(void 0===n){let e=Error("Key not found: ".concat(t));throw(0,i.Tb)(e),e}return n}let d=(e,t)=>{let n=null!=t?t:e.current_leaf_message_uuid;if(!n)return e;for(;n!==l;){var i;let t=c(e.parentByChildUuid,n),r=null===(i=c(e.childrenByParentUuid,t))||void 0===i?void 0:i.indexOf(n);e.selectedChildByUuid.set(t,r),n=t}return{...e,current_leaf_message_uuid:t}},v=e=>e.content?e:{...e,content:[{type:"text",text:e.text||"",citations:[]}]},_=e=>{var t,n,i;let r=new Map,a=new Map,o=new Map,s=new Map,u=new Map;if(0===e.chat_messages.length)return{messageByUuid:a,parentByChildUuid:o,childrenByParentUuid:s,selectedChildByUuid:u};let c=e.chat_messages.map(v);for(let e of c)r.set(e.index,e),a.set(e.uuid,e);for(let e of c){let t=e.parent_message_uuid;if(!t){let i=e.index-1;for(;!t&&i>=0;)t=null===(n=r.get(i))||void 0===n?void 0:n.uuid,i--}t=null!=t?t:l,o.set(e.uuid,t),s.set(t,(null!==(i=s.get(t))&&void 0!==i?i:[]).concat(e.uuid)),u.set(t,0)}if(!(null===(t=s.get(l))||void 0===t?void 0:t[0]))throw Error("No root message found");return{chat_messages:c,messageByUuid:a,parentByChildUuid:o,childrenByParentUuid:s,selectedChildByUuid:u}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Set;for(let t of e.chat_messages)"assistant"===t.sender&&t.parent_message_uuid&&n.add(t.parent_message_uuid);let i=e.chat_messages.filter(e=>"assistant"===e.sender||n.has(e.uuid)||void 0===e.parent_message_uuid||t),r={...e,chat_messages:i},a={...r,..._(r)};return a.current_leaf_message_uuid||d(a),d(a,r.current_leaf_message_uuid)},f=e=>{let t=Array.from(e.messageByUuid.values()).map(e=>e.index);return 0===t.length?-1:Math.max(...t)},p=(e,t)=>{for(let i of(e.chat_messages=e.chat_messages.concat(t),t)){var n;if(!i.parent_message_uuid)throw Error("Parent UUID required");let t=i.parent_message_uuid;e.messageByUuid.set(i.uuid,i),e.parentByChildUuid.set(i.uuid,t);let r=null!==(n=e.childrenByParentUuid.get(t))&&void 0!==n?n:[];r.push(i.uuid),e.childrenByParentUuid.set(t,r),e.selectedChildByUuid.set(t,r.length-1)}return d(e,t[t.length-1].uuid)},m=(e,t)=>{let n=[],i=null!=t?t:l;for(;e.childrenByParentUuid.has(i);){let t=c(e.childrenByParentUuid,i);if(0===t.length)break;let r=c(e.selectedChildByUuid,i),a=c(e.messageByUuid,t[r]);n.push({...a,parent_message_uuid:i,nOptions:t.length,selectedOption:r}),i=a.uuid}return n};function h(e,t,n){var i;let r=c(e.parentByChildUuid,t.uuid),o=c(e.childrenByParentUuid,r),s=a()((null!==(i=t.selectedOption)&&void 0!==i?i:0)+n,0,o.length-1);e.selectedChildByUuid.set(r,s);let l=m(e,r);return d(e,l[l.length-1].uuid)}},80573:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(87033);let r=()=>{let{value:e}=(0,i.FL)("claude_ai_segment_enabled");return e}},3053:function(e,t,n){"use strict";n.d(t,{Ve:function(){return y},YZ:function(){return w},q$:function(){return C},z$:function(){return k}});var i=n(30947),r=n(6385),a=n(45439),o=n(87033),s=n(99586),l=n(7653),u=n(80573),c=n(5362),d=n(8571),v=n(50862),_=n(60705),g=n(27218),f=n(91447),p=n(25304);let m={snippets_command_used:{version:1},file_upload_too_large:{version:1},sse_interrupted:{version:1},snippets_suggestion_selected:{version:1},payment_modal_open:{version:1},pro_waitlist_requested:{version:1},payment_state_poll_for_invoice:{version:1},payment_state_poll_for_payment:{version:1},payment_state_poll_for_capability:{version:1},payment_state_payment_requires_confirmation:{version:1},payment_state_payment_failed:{version:1},payment_state_success:{version:1},payment_state_timed_out:{version:1},"onboarding.pubsec_system_use.started":{version:1},"onboarding.phone_verification.start":{version:1},"onboarding.phone_verification.sent_code":{version:1},"onboarding.phone_verification.invalid_code":{version:1},"onboarding.phone_verification.verified_code":{version:1},"onboarding.age_verification.start":{version:1},"onboarding.age_verification.complete":{version:1},"onboarding.name_input.started":{version:1},"onboarding.name_input.finished":{version:1},"onboarding.acceptable_use.started":{version:1},"onboarding.acceptable_use.finished":{version:1},"onboarding.disclaimers.started":{version:1},"onboarding.disclaimers.finished":{version:1},"onboarding.started":{version:1},"onboarding.completed":{version:1},"extended_onboarding.started":{version:1},"extended_onboarding.disclaimer.completed":{version:1},"extended_onboarding.name_input.completed":{version:1},"extended_onboarding.work_function.completed":{version:1},"extended_onboarding.drive_integration.started":{version:1},"extended_onboarding.drive_integration.skipped":{version:1},"extended_onboarding.drive_integration.completed":{version:1},"extended_onboarding.gmail_integration.started":{version:1},"extended_onboarding.gmail_integration.skipped":{version:1},"extended_onboarding.gmail_integration.completed":{version:1},"extended_onboarding.gcal_integration.started":{version:1},"extended_onboarding.gcal_integration.skipped":{version:1},"extended_onboarding.gcal_integration.completed":{version:1},"extended_onboarding.all_integrations.skipped":{version:1},"extended_onboarding.all_integrations.completed":{version:1},"extended_onboarding.topics.completed":{version:1},"extended_onboarding.example_prompts.completed":{version:1},"extended_onboarding.completed":{version:1},"extended_onboarding.hear_about.completed":{version:1},"extended_onboarding.hear_about.source_selected":{version:1},"extended_onboarding.hear_about.skipped":{version:1},"pro_subscription.upgraded_to_annual":{version:1},"pro_subscription.upgraded_to_max":{version:1},"max_subscription.downgraded_to_max":{version:1},"max_subscription.downgraded_to_pro":{version:1},"chat.conversation.first_conversation_created":{version:1},"chat.conversation.token_limit_exceeded":{version:1},"chat.conversation.token_limit_will_exceed":{version:1},"chat.conversation.too_long_prompt:loaded":{version:1},"chat.conversation.too_long_prompt:accepted":{version:1},"chat.conversation.too_long_prompt:dismissed":{version:1},"chat.conversation.too_long_prompt_warning:loaded":{version:1},"chat.conversation.too_long_prompt_warning:accepted":{version:1},"chat.conversation.too_long_prompt_warning:dismissed":{version:1},"chat.share.button.clicked":{version:1},"chat.share.modal.share_button.clicked":{version:1},"chat.share.modal.unshare_button.clicked":{version:1},"chat.share.open_link.clicked":{version:1},"chat.share.copy_link.clicked":{version:1},"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"console.feedback.opened":{version:1},"console.feedback.submitted":{version:1},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.show_golden_answers.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.run_all.stopped":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:2},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.prompt.new":{version:1},"workbench.completion.started":{version:2},"workbench.completion.finished":{version:2},"workbench.completion_stream.started":{version:1},"workbench.completion_stream.finished":{version:1},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"workbench.examples.pane.loaded":{version:1},"workbench.examples.example.added":{version:2},"workbench.examples.example.deleted":{version:1},"workbench.examples.converted_to_raw_text":{version:1},"workbench.code_modal.opened":{version:1},"workbench.code_modal.code_copied":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.artifacts.execution.error":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.projects.project_starter.clicked":{version:1},"claudeai.projects.chat_starter.clicked":{version:1},"claudeai.conversation.artifact.vscode_exported":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.support.opened":{version:1},"claudeai.get_help.clicked":{version:1},"claudeai.conversation.feedback.sent":{version:1},"claudeai.conversation.setting.toggled":{version:1},"claudeai.thinking_cell.clicked":{version:1},"ccos.chatsuggestion.clicked":{version:1},"ccos.chatsuggestions.loaded":{version:1},"ccos.chatsuggestions.feedback":{version:1},"styles.selector.clicked":{version:1},"styles.modal":{version:1},"styles.nux.create_clicked":{version:1},"styles.custom.create_clicked":{version:1},"styles.custom.describe_clicked":{version:1},"styles.custom.describe_selected":{version:1},"styles.selected":{version:1},"artifact.feedback.sentiment":{version:1},"artifact.feedback.note":{version:1},"artifact.share_button_clicked":{version:1},"artifact.publish_button_clicked":{version:1},"artifact.share.modal.share_button_clicked":{version:1},"artifact.publish.modal.publish_button_clicked":{version:1},"artifact.studio.create_button_clicked":{version:1},"artifact.studio.create_mode_selected":{version:1},"artifact.studio.remix":{version:1},"artifact.studio.view_full_chat":{version:1},"artifact.studio.copy_prompt":{version:1},"artifact.popover.artifacts_tab_clicked":{version:1},"artifact.popover.dismiss_button_clicked":{version:1},"artifact.popover.dismiss_x_clicked":{version:1},"artifact.interaction.click":{version:1},"artifact.callout.learn_more_clicked":{version:1},"artifact.callout.enable_clicked":{version:1},"artifact.callout.dismissed":{version:1},"artifact.public.remix":{version:1},"mcp.servers.listed":{version:1},"mcp.servers.connected":{version:1},"mcp.resources.listed":{version:1},"mcp.resources.read":{version:1},"mcp.prompts.listed":{version:1},"mcp.prompts.used":{version:1},"mcp.tools.listed":{version:1},"mcp.tools.called":{version:1},"mcp.sampling.requested":{version:1},"mcp.websocket.transport.connected":{version:1},"mcp.websocket.authfailure":{version:1},"mcp.websocket.transport.reconnected":{version:1},"harmony.file.saved":{version:1},"harmony.suggestion.accepted":{version:1},"harmony.suggestion.rejected":{version:1},"hfi.comparative_model.selected":{version:1},"hfi.comparative_model.selection_cleared":{version:1},"hfi.comparative_model.streaming.started":{version:1},"hfi.comparative_model.streaming.finished":{version:1},"hfi.comparative_model.feedback_bar.switch_response.clicked":{version:1},"hfi.comparative_model.feedback_bar.prefer_response.clicked":{version:1},"apps.download_button_clicked":{version:1},"apps.nudge_banner_shown":{version:1},"apps.nudge_banner_clicked":{version:1},"apps.harmony_directory_synced":{version:1},"console.onboarding.name_and_legal.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.name_and_legal.submitted":{version:1,data_team_tag:"onboarding_funnel"},"tengu.waitlist.update":{version:1},"tengu.waitlist.details":{version:1},"oauth.authorize.approved":{version:1},"oauth.authorize.denied":{version:1},"oauth.authorize.success":{version:1},"oauth.authorize.failure":{version:1},"console.onboarding.account_type.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.individual_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.organization_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.submitted":{version:1,data_team_tag:"onboarding_funnel"},"login.account.created":{version:1},"login.email.sending_magic_link":{version:1},"login.email.magic_link_sent":{version:1},"login.email.magic_link_send_error":{version:1},"login.email.verifying_magic_link":{version:1},"login.email.magic_link_success":{version:1},"login.email.magic_link_verification_error":{version:1},"login.email.sso_initiated":{version:1},"login.email.sso_success":{version:1},"login.email.sso_verifying_callback":{version:1},"login.email.sso_verification_error":{version:1},"login.email.verifying_code":{version:1},"login.email.code_verification_error":{version:1},"login.email.finished":{version:1},"login.google.started":{version:1},"login.google.error":{version:1},"login.google.verifying":{version:1},"login.google.verification_error":{version:1},"login.google.finished":{version:1},"landing.section.features.viewed":{version:1},"landing.section.pricing.viewed":{version:1},"spotlight.shown":{version:1},"spotlight.dismissed":{version:1},"spotlight.action_clicked":{version:1},"claudeai.conversation.citation_clicked":{version:1},"claudeai.in_chat_upsell.connect_gdrive.start":{version:1},"claudeai.in_chat_upsell.dismiss":{version:1},"claudeai.cardamom_prompts.category_displayed":{version:1},"claudeai.cardamom_prompts.prompt_displayed":{version:1},"claudeai.cardamom_prompts.prompt_used":{version:1},"artifactinlinefeedback.selection.clicked":{version:1},"claudeai.toast.shown":{version:1},"claudeai.toast.dismissed":{version:1},"claudeai.toast.cta_clicked":{version:1},"claudeai.invite_contest.clicked":{version:1},"claudeai.invite_contest.dismissed":{version:1},"claudeai.notification.permission.request_started":{version:1},"claudeai.notification.permission.result":{version:1}},h=()=>{var e;return{userAgent:null===(e=window.navigator)||void 0===e?void 0:e.userAgent,fbc:_.U.get(r.cn.FBCLID),gclid:_.U.get(r.cn.GOOGLE_GCL_AW)}};function b(e,t){let n={...h()};if((null==e?void 0:e.email_address)&&(n.email=e.email_address),e){var i,r;n.account_created_at=Date.parse(e.created_at),n.account_uuid=e.uuid;let o=t||(null===(r=e.memberships)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.organization);if(o){n.organization_uuid=o.uuid,n.billing_type=o.billing_type;let e=(0,a.Nb)(o),t=(0,a.qD)(o);n.org_type=e,n.subscription_plan="claude_max"===e&&t?"".concat(e," ").concat(t):e}}return n}let y=()=>{let{account:e,activeOrganization:t}=(0,g.t)();return(0,l.useMemo)(()=>b(e,t),[e,t])},k=()=>{let{analytics:e}=(0,f.K)(),t=(0,p.T)(),{preferences:n}=(0,v.C)(),{value:i}=(0,o.FL)("log_segment_events"),r=(0,u.$)(),{account:a,activeOrganization:s,isLoading:c}=(0,g.t)(),_=(0,d.Zx)(),h=null==a?void 0:a.uuid,y=null==s?void 0:s.uuid,k=null==s?void 0:s.billing_type,w=(0,l.useCallback)(t=>{let i=!t&&!a;return!c&&e&&r&&(!i||n.analytics)},[c,e,r,a,n.analytics]),C=(0,l.useCallback)(e=>b(null!=e?e:a,s),[a,s]),x=(0,l.useCallback)(async(n,r)=>{var a;let{event_key:o,...s}=n,l={account_uuid:null!==(a=null==r?void 0:r.uuid)&&void 0!==a?a:h,organization_uuid:y,billing_type:k,surface:_?"claude-ai":"console",...m[o],...s},u={context:{traits:C(r)}};i&&console.log("[Segment Event] track: ".concat(o),l,u),w(r)&&(await (null==e?void 0:e.track(o,l,u)),null==t||t.track(o,l,u))},[e,t,h,y,k,_,i,w,C]),E=(0,l.useCallback)(async(n,r)=>{i&&console.log("[Segment Event] identify: ".concat(n),r),w()&&(await (null==e?void 0:e.identify(n,r)),null==t||t.identify(n,r))},[e,t,w,i]),S=(0,l.useCallback)(async(t,n)=>{i&&console.log("[Segment Event] alias: ".concat(n," -> ").concat(t)),w()&&await (null==e?void 0:e.alias(t,n))},[e,w,i]),T=(0,l.useCallback)(async(t,n)=>{var r,o,s;i&&console.log("[Segment Event] page_view: ".concat(t),n),w()&&(null!==(o=null===(r=await (null==e?void 0:e.user()))||void 0===r?void 0:r.id())&&void 0!==o?o:void 0)===(null!==(s=null==a?void 0:a.uuid)&&void 0!==s?s:void 0)&&await (null==e?void 0:e.page(t,n))},[e,w,a,i]);return(0,l.useMemo)(()=>({track:x,identify:E,page:T,alias:S,getTraitsWithContext:C}),[x,E,T,S,C])},w=(e,t,n,r)=>{let a=k(),{onSuccess:o,onError:s,...l}=r||{};return(0,c.uC)(t,n,{onSuccess(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];a.track({event_key:e,result:"success"}),null==o||o(...n)},onError(t){let n;for(var r=arguments.length,o=Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];t instanceof i.Hx&&(n=t.type),a.track({event_key:e,result:"failure",failure_reason:n}),null==s||s(t,...o)},...l})},C=e=>{var t;let{eventKey:n,threshold:i=.5,freezeOnceVisible:r=!0}=e,{track:a}=k(),o=(0,l.useRef)(!1),{ref:u,entry:c}=(0,s.s)({threshold:i}),d=null!==(t=null==c?void 0:c.isIntersecting)&&void 0!==t&&t;return(0,l.useEffect)(()=>{!d||r&&o.current||(a({event_key:n}),o.current=!0)},[d,a,n,r]),u}},50862:function(e,t,n){"use strict";n.d(t,{ConsentProvider:function(){return g},C:function(){return f}});var i=n(27573),r=n(45144),a=n(7653),o=n(60705),s=n(94872),l=n(53500),u=n(6385),c=n(35919),d=n.n(c),v=n(95407);let _=(0,a.createContext)({showConsentBanner:!1,openConsentBanner:d(),preferences:v.iw,savePreferences:d()}),g=e=>{let{children:t,requiresExplicitConsent:n}=e,[c,d,g]=function(e,t){let n=(0,o.f)(),[i,s]=(0,a.useState)(()=>!!n.get(e)),[l,u]=(0,a.useState)(()=>{try{let i=n.get(e);return i?JSON.parse(i):t}catch(n){return(0,r.Tb)(n,{extra:{message:"Malformed JSON cookie",cookieKey:e}}),t}});return[l,(0,a.useCallback)(t=>{n.set(e,JSON.stringify(t)),u(t),s(!0)},[n,e]),i]}(u.cn.CONSENT_PREFERENCES,n?v.iw:v.DF),[f,p]=(0,a.useState)(n&&!g),m=(0,a.useCallback)(e=>{d(e),(0,s.HF)(e),p(!1),l.u.updateCategories(e)},[d,p]);return(0,i.jsx)(_.Provider,{value:{showConsentBanner:f,openConsentBanner:()=>p(!0),preferences:c,savePreferences:m},children:t})};function f(){return(0,a.useContext)(_)}},1812:function(e,t,n){"use strict";n.d(t,{I:function(){return s},T:function(){return o}});var i=n(27573),r=n(7653);let a=(0,r.createContext)(null),o=()=>{let e=(0,r.useContext)(a);return void 0===e?null:e},s=e=>{let{children:t,settings:n}=e;return(0,i.jsx)(a.Provider,{value:n,children:t})}},27895:function(e,t,n){"use strict";n.d(t,{ErrorsProvider:function(){return h},e:function(){return b},v:function(){return w}});var i=n(27573),r=n(35228),a=n(87033),o=n(97975),s=n.n(o),l=n(55854),u=n.n(l),c=n(78646),d=n.n(c),v=n(81695),_=n(7653),g=n(41270),f=n(27218),p=n(18013);let m=(0,_.createContext)(void 0);function h(e){let{children:t}=e,n=(0,_.useRef)(1),[r,a]=(0,_.useState)([]),o=(0,_.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),s=(0,_.useCallback)((e,t)=>{let i=n.current++;return a(t=>[...t,{id:i,message:e instanceof Error?e.message:e,toastType:"error"}]),t&&setTimeout(()=>o(i),t),i},[o]),l=(0,_.useCallback)((e,t)=>{let i=n.current++;return a(t=>[...t,{id:i,message:e,toastType:"success"}]),t&&setTimeout(()=>o(i),t),i},[o]),u=(0,_.useMemo)(()=>({toasts:r,addError:s,addSuccess:l,clearToast:o}),[r,s,l,o]);return(0,i.jsx)(m.Provider,{value:u,children:t})}function b(){let e=(0,_.useContext)(m);if(!e)throw Error("Must be called within ErrorsProvider");return e}let y=g.z.object({id:g.z.string().optional().nullable(),title:g.z.string().optional().nullable(),message:g.z.string().optional().nullable(),displayFrequencyHours:g.z.number().optional().nullable()}),k={};function w(){var e;let{id:t,title:n,message:i,displayFrequencyHours:o}=(0,a.xQ)("claude_system_message",k,y),{account:l}=(0,f.t)(),c=null!==(e=null==l?void 0:l.uuid)&&void 0!==e?e:"logged-out",g=(0,v.usePathname)(),[m,h]=(0,p.R)("dismissed-system-messages",{}),b=(0,_.useMemo)(()=>()=>h(e=>{let n=s()(e);return t&&d()(n,[c,t],Date.now()),n}),[h,c,t]);return(0,_.useMemo)(()=>{if(!l||(0,r.cG)(l,!0)||"/download"===g||!t)return!1;let e=u()(m,[c,t]);return!e||"boolean"==typeof e||!!o&&Date.now()-e>=36e5*o},[l,t,c,m,o,g])?{currentSystemMessageId:t,currentSystemMessageTitle:n,currentSystemMessageContent:i,dismissCurrentSystemMessage:b}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},94872:function(e,t,n){"use strict";n.d(t,{HF:function(){return a},bq:function(){return r}});var i=n(45144);let r=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{"function"==typeof window.gtag&&gtag(e,...n)}catch(e){(0,i.Tb)(e)}},a=e=>{r("consent","update",o(e))},o=e=>({ad_personalization:e.marketing?"granted":"denied",ad_user_data:e.marketing?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"})},91447:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var i=n(8571),r=n(87033),a=n(7653),o=n(53500);let s=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,i.mX)(),{value:s}=(0,r.FL)("requires_explicit_consent"),l=(0,a.useCallback)(()=>{o.u.reset()},[]);return{analytics:o.u.loadIfNecessary({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,requiresExplicitConsent:s}),reset:l}}},25304:function(e,t,n){"use strict";n.d(t,{IsolatedSegmentProvider:function(){return v},T:function(){return _}});var i=n(27573),r=n(80573),a=n(8571),o=n(87033),s=n(44053),l=n(7653);let u=["onboarding.started","extended_onboarding.started","onboarding.completed","chat.conversation.first_conversation_created","payment_state_success"],c={"onboarding.started":"Started Onboarding","extended_onboarding.started":"Started Onboarding","onboarding.completed":"CompleteRegistration","chat.conversation.first_conversation_created":"NewConversation",payment_state_success:"Purchase"},d=(0,l.createContext)(null);function v(e){let{children:t}=e,{segmentKey:n,segmentCdnHost:v}=(0,a.mX)(),_=(0,l.useRef)(null),[g,f]=(0,l.useState)(!1),p=(0,l.useRef)([]),{value:m}=(0,o.FL)("log_segment_events"),h=m&&!0,b=(0,r.$)(),y=(0,l.useCallback)(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];h&&console.debug("[IsolatedSegmentProvider]",e,...n)},[h]),k=(0,l.useCallback)(()=>{let e=[...p.current];p.current=[],e.forEach(e=>{var t,n;y("Sending message to iframe:",e,p.current),null===(n=_.current)||void 0===n||null===(t=n.contentWindow)||void 0===t||t.postMessage({target:"isolated-segment",...e},"*")})},[y]),w=(0,l.useCallback)(e=>{var t;p.current.push(e),(null===(t=_.current)||void 0===t?void 0:t.contentWindow)&&(g||"init"===e.type)?k():y("iframe not ready, queueing message:",e)},[y,g,k]);(0,s.s)("message",(0,l.useCallback)(e=>{let t=e.data;if("isolated-segment"===t.source)switch(y("Received message from iframe:",t),t.type){case"iframe_ready":y("Iframe ready, initializing Segment with writeKey:",n,"cdnHost:",v),w({type:"init",writeKey:n,cdnHost:v});break;case"segment_initialized":y("Segment in iframe initialized successfully"),f(!0),y("messageQueue when IsolatedSegment is ready",p.current),k(),p.current=[];break;default:y("Message from isolated-segment iframe:",t.type)}},[v,n,y,w,f,k]));let C=(0,l.useCallback)((e,t,n)=>{if(y("Tracking event:",e,t,n),u.includes(e)){let i=c[e]||e;y("Sending event to Facebook Pixel:",e,i,t),w({type:"track",event:i,properties:t,options:n})}},[y,w]),x=(0,l.useCallback)((e,t)=>{y("Identifying user:",e,t),w({type:"identify",userId:e,traits:t})},[y,w]),E=(0,l.useCallback)(()=>{y("Sending ping..."),w({type:"ping"})},[y,w]),S=(0,l.useMemo)(()=>({isReady:g,track:C,identify:x,sendPing:E}),[g,C,x,E]);return(0,i.jsxs)(d.Provider,{value:S,children:[t,b&&(0,i.jsx)("iframe",{ref:_,src:"/isolated-segment.html",style:{display:"none"},referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin",title:""})]})}function _(){return(0,l.useContext)(d)}},48410:function(e,t,n){"use strict";n.d(t,{TierSelectorProvider:function(){return d},i:function(){return c}});var i=n(27573),r=n(6385),a=n(87033),o=n(98649),s=n(7653),l=n(60705);let u=(0,s.createContext)(null),c=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useTierSelector must be used within a TierSelectorProvider");return e},d=e=>{var t;let{children:n,initialEnabled:c=!1}=e,d=(0,l.f)(),[v,_]=(0,s.useState)(()=>d.get(r.cn.SELECTED_TIER)||null),[g,f]=(0,s.useState)(()=>"true"===d.get(r.cn.SHOULD_OVERRIDE_TOKEN_LIMITS)),[p,m]=(0,s.useState)(()=>"true"===d.get(r.cn.SHOULD_OVERRIDE_FEATURE_ACCESS)),h=null!==(t=(0,a.FL)("internal_tier_selector").value)&&void 0!==t?t:c,b=(0,s.useState)(h)[1],y=(0,s.useCallback)(()=>{let e=[o.kQ.FREE,o.kQ.PRO,o.kQ.ENTERPRISE,o.kQ.MAX],t=Math.floor(Math.random()*e.length);return e[t]},[]),k=(0,s.useCallback)(e=>{if(!h){_(e);return}if(null===e){let e=v||y();d.set(r.cn.SELECTED_TIER,e,{maxAgeSeconds:2592e3})}else d.set(r.cn.SELECTED_TIER,e);_(e)},[v,_,d,y,h]);(0,s.useEffect)(()=>{h?v&&d.set(r.cn.SELECTED_TIER,v):d.delete(r.cn.SELECTED_TIER)},[h,v,d]);let w=(0,s.useCallback)(e=>{if(!h){f(e);return}e?d.set(r.cn.SHOULD_OVERRIDE_TOKEN_LIMITS,"true"):d.delete(r.cn.SHOULD_OVERRIDE_TOKEN_LIMITS),f(e)},[h,d]),C=(0,s.useCallback)(e=>{if(!h){m(e);return}e?d.set(r.cn.SHOULD_OVERRIDE_FEATURE_ACCESS,"true"):d.delete(r.cn.SHOULD_OVERRIDE_FEATURE_ACCESS),m(e)},[h,d]);return(0,s.useEffect)(()=>{h||(d.delete(r.cn.SHOULD_OVERRIDE_TOKEN_LIMITS),d.delete(r.cn.SHOULD_OVERRIDE_FEATURE_ACCESS))},[h,d]),(0,i.jsx)(u.Provider,{value:{selectedTier:v,isTierSelectorEnabled:h,setSelectedTier:k,setIsTierSelectorEnabled:b,shouldOverrideTokenLimits:g,setShouldOverrideTokenLimits:w,shouldOverrideFeatureAccess:p,setShouldOverrideFeatureAccess:C},children:n})}},18013:function(e,t,n){"use strict";n.d(t,{A:function(){return a},R:function(){return o}});var i=n(83981),r=n(14418);function a(e,t){return(0,i.X)({key:"SSS-".concat(e),defaultValue:t,serialize:JSON.stringify,deserialize:e=>void 0===e?t:JSON.parse(e)})}function o(e,t){return(0,r.I)({key:"LSS-".concat(e),defaultValue:t,serialize:JSON.stringify,deserialize:e=>void 0===e?t:JSON.parse(e),getInitialValueInEffect:!1,sync:!0})}},35228:function(e,t,n){"use strict";n.d(t,{D_:function(){return o},IC:function(){return s},c6:function(){return r},cG:function(){return l},kK:function(){return a},wJ:function(){return i}});let i=e=>{let{account:t,isClaudeDot:n}=e;return n?!1===t.settings.has_finished_claudeai_onboarding:!t.full_name||!t.display_name},r=(e,t)=>t&&!e.is_verified,a=(e,t)=>!!function(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}(e,t?"raven":"api"),o=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t&&!e.age_is_verified},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i({account:e,isClaudeDot:t})||r(e,t)||a(e,t)||o(e,t)||s(e,t,n)}},98731:function(e,t,n){"use strict";n.d(t,{K:function(){return i}});let i=e=>{let t="";if(e.content)for(let n of e.content)"text"===n.type&&(t+=n.text);return t}},45439:function(e,t,n){"use strict";n.d(t,{BM:function(){return a},Nb:function(){return i},On:function(){return r},qD:function(){return o}});let i=e=>{let t=e.capabilities;if(t.includes("api")&&t.includes("chat"))return"unknown";if(t.includes("api"))return t.includes("api_individual")?"api_individual":"api_team";if(t.includes("chat")){if(t.includes("raven")){let t=e.raven_type;return t?"enterprise"===t?"claude_enterprise":"claude_team":"unknown"}return t.includes("claude_max")?"claude_max":t.includes("claude_pro")?"claude_pro":"claude_free"}return"unknown"},r=e=>"claude_pro"===e||"claude_max"===e,a=e=>"claude_team"===e||"claude_enterprise"===e,o=e=>"default_claude_max_5x"===e.rate_limit_tier?"5x":"default_claude_max_20x"===e.rate_limit_tier?"20x":void 0},51432:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});let i=()=>void 0===crypto.randomUUID?"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,e=>{let t=parseInt(e);return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):crypto.randomUUID()},58884:function(e,t,n){"use strict";async function i(e,t){let n;let i=e.getReader();for(;!(n=await i.read()).done;)t(n.value)}function r(){return{data:"",event:"",id:"",retry:void 0}}n.d(t,{a:function(){return o},L:function(){return l}});var a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};let o="text/event-stream",s="last-event-id";function l(e,t){var{signal:n,headers:l,onopen:c,onmessage:d,onclose:v,onerror:_,openWhenHidden:g,fetch:f}=t,p=a(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((t,a)=>{let m;let h=Object.assign({},l);function b(){m.abort(),document.hidden||E()}h.accept||(h.accept=o),"undefined"==typeof document||g||document.addEventListener("visibilitychange",b);let y=1e3,k=0;function w(){"undefined"==typeof document||g||document.removeEventListener("visibilitychange",b),clearTimeout(k),m.abort()}null==n||n.addEventListener("abort",()=>{w(),t()});let C=null!=f?f:fetch,x=null!=c?c:u;async function E(){var n,o;m=new AbortController;try{let n,a,l,u;let c=await C(e,Object.assign(Object.assign({},p),{headers:h,signal:m.signal}));await x(c),await i(c.body,(o=function(e,t,n){let i=r(),a=new TextDecoder;return function(o,s){if(0===o.length)null==e||e(i),i=r();else if(s>0){let e=a.decode(o.subarray(0,s)),r=s+(32===o[s+1]?2:1),l=a.decode(o.subarray(r));switch(e){case"data":i.data=i.data?i.data+"\n"+l:l;break;case"event":i.event=l;break;case"id":null==t||t(i.id=l);break;case"retry":let u=parseInt(l,10);isNaN(u)||null==n||n(i.retry=u)}}}}(d,e=>{e?h[s]=e:delete h[s]},e=>{y=e}),u=!1,function(e){void 0===n?(n=e,a=0,l=-1):n=function(e,t){let n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(n,e);let t=n.length,i=0;for(;a<t;){u&&(10===n[a]&&(i=++a),u=!1);let e=-1;for(;a<t&&-1===e;++a)switch(n[a]){case 58:-1===l&&(l=a-i);break;case 13:u=!0;case 10:e=a}if(-1===e)break;o(n.subarray(i,e),l),i=a,l=-1}i===t?n=void 0:0!==i&&(n=n.subarray(i),a-=i)})),null==v||v(),w(),t()}catch(e){if(!m.signal.aborted)try{let t=null!==(n=null==_?void 0:_(e))&&void 0!==n?n:y;clearTimeout(k),k=setTimeout(E,t)}catch(e){w(),a(e)}}}E()})}function u(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(o)))throw Error(`Expected content-type to be ${o}, Actual: ${t}`)}},99586:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var i=n(7653);function r(e){let[t,n]=(0,i.useState)(null),r=(0,i.useRef)(null);return{ref:(0,i.useCallback)(t=>{if(r.current&&(r.current.disconnect(),r.current=null),null===t){n(null);return}r.current=new IntersectionObserver(e=>{let[t]=e;n(t)},e),r.current.observe(t)},[null==e?void 0:e.rootMargin,null==e?void 0:e.root,null==e?void 0:e.threshold]),entry:t}}}},function(e){e.O(0,[950,3279,6340,1270,8183,6947,3840,6971,7492,3290,7218,1817,1293,1362,1426,1744],function(){return e(e.s=91192)}),_N_E=e.O()}]);